# Prometheus Alert Rules
# Workshop: Build Intelligent Networks with AI
#
# WORKING EXAMPLE: Three alert rules demonstrating different severities.
# EXTENSION TASK: Add network-specific alerts (BGP, interfaces, etc.).
# See prompts/add-alert-rules.md for AI assistance.

groups:
  - name: workshop_alerts
    rules:
      # =======================================================================
      # WORKING EXAMPLE: Test Alert (info severity)
      # =======================================================================
      # Always fires - used to demonstrate the AI alert analyzer
      - alert: TestAlert
        expr: vector(1)
        for: 0m
        labels:
          severity: info
          team: network
        annotations:
          summary: "Test alert for workshop"
          description: "This is a test alert to demonstrate the AI alert analyzer."

      # =======================================================================
      # WORKING EXAMPLE: BGP Session Down (critical severity)
      # =======================================================================
      - alert: BGPSessionDown
        expr: bgp_session_state == 0
        for: 1m
        labels:
          severity: critical
          team: network
        annotations:
          summary: "BGP session down on {{ $labels.device }}"
          description: "BGP session to {{ $labels.peer }} (ASN {{ $labels.asn }}) is down on {{ $labels.device }}."

      # =======================================================================
      # WORKING EXAMPLE: Interface Down (critical severity)
      # =======================================================================
      - alert: InterfaceDown
        expr: interface_up == 0
        for: 1m
        labels:
          severity: critical
          team: network
        annotations:
          summary: "Interface down on {{ $labels.device }}"
          description: "{{ $labels.interface }} is down on {{ $labels.device }}."

      # =======================================================================
      # WORKING EXAMPLE: High CPU (warning severity)
      # =======================================================================
      - alert: HighCPU
        expr: device_cpu_percent > 80
        for: 2m
        labels:
          severity: warning
          team: network
        annotations:
          summary: "High CPU on {{ $labels.device }}"
          description: "CPU usage is {{ $value }}% on {{ $labels.device }}."

      # =======================================================================
      # WORKING EXAMPLE: High Memory (warning severity)
      # =======================================================================
      - alert: HighMemory
        expr: device_memory_percent > 85
        for: 2m
        labels:
          severity: warning
          team: network
        annotations:
          summary: "High memory on {{ $labels.device }}"
          description: "Memory usage is {{ $value }}% on {{ $labels.device }}."

      # =======================================================================
      # WORKING EXAMPLE: Interface Errors (warning severity)
      # =======================================================================
      - alert: InterfaceErrors
        expr: rate(interface_errors_total[5m]) > 10
        for: 2m
        labels:
          severity: warning
          team: network
        annotations:
          summary: "Interface errors on {{ $labels.device }}"
          description: "{{ $labels.interface }} on {{ $labels.device }} is experiencing {{ $value }} errors/sec."

      # =======================================================================
      # WORKING EXAMPLE: High Temperature (warning severity)
      # =======================================================================
      - alert: HighTemperature
        expr: device_temperature_celsius > 65
        for: 2m
        labels:
          severity: warning
          team: network
        annotations:
          summary: "High temperature on {{ $labels.device }}"
          description: "{{ $labels.sensor }} sensor on {{ $labels.device }} is at {{ $value }}C."

      # =======================================================================
      # EXTENSION TASK: Add custom alert rules
      # =======================================================================
      # See prompts/add-alert-rules.md for AI assistance with additional rules
